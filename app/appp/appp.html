<!DOCTYPE html>
<html ng-app="me" ng-controller="main">
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="../../public/static/js/angular-1.3.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../public/static/js/angular-ui-router.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		var app = angular.module('me',['ui.router']);
		app.controller('main',function($scope){
			
		});
		app.config(function($httpProvider,$stateProvider,$urlRouterProvider) {
			console.log(555555555555)
			$urlRouterProvider.otherwise('/page1')
			$stateProvider.state('page1',{
				url: '/page1',
				views: {
					'':{
						template: "<div>dfdsfdsfsdfsfsdf</div>",
					}
					
				},
				access: true
			}).state('page2',{
				url: '/page2',
				views: {
					'':{
						template: "第2页",
					}
				}
			}).state('page3',{
				url: '/page3',
				views: {
					'':{
						template: "第3页",
					}
					
				},
				access: true
			})
		    //$httpProvider.interceptors.push('sessionInjector');
		}).run(function($rootScope,$state,$location){
			$rootScope.$on('$stateChangeStart',function(event,toState){
				
				if (toState != null && toState.access != null && toState.access) {
					event.preventDefault();
					//$location.path('/page2');
					$state.go('page2',{});
					alert('runing')
	        	}
				
			})
			
			//if($state)
			
		})
	</script>
	</head>
	<body>
		<a ui-sref="page1">1</a><br />
		<a ui-sref="page2">2</a><br />
		<a ui-sref="page3">3</a>
		<div class="" ui-view >
			
		</div>
	</body>
	
</html>
